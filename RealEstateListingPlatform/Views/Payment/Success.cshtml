@{
    ViewData["Title"] = "Payment Successful";
    Layout = "~/Views/Shared/_ListerLayout.cshtml";
    var transaction = ViewBag.Transaction as BLL.DTOs.TransactionDto;
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card shadow text-center">
                <div class="card-body p-5">
                    <div class="success-animation mb-4">
                        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                            <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                        </svg>
                    </div>
                    
                    <h2 class="text-success fw-bold mb-3">Payment Successful!</h2>
                    <p class="text-muted mb-4">Your package has been activated</p>

                    @if (transaction != null)
                    {
                        <div class="bg-light p-4 rounded mb-4 text-start">
                            <h6 class="fw-bold mb-3">Transaction Details</h6>
                            <div class="row mb-2">
                                <div class="col-6 text-muted">Transaction ID:</div>
                                <div class="col-6 text-end"><small class="font-monospace">@transaction.Id.ToString().Substring(0, 13)...</small></div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-6 text-muted">Amount:</div>
                                <div class="col-6 text-end fw-bold">@transaction.Amount.ToString("N0") VND</div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-6 text-muted">Payment Method:</div>
                                <div class="col-6 text-end">@transaction.PaymentMethod</div>
                            </div>
                            <div class="row">
                                <div class="col-6 text-muted">Date:</div>
                                <div class="col-6 text-end">@transaction.CreatedAt.ToString("MMM dd, yyyy HH:mm")</div>
                            </div>
                        </div>
                    }

                    <div class="d-grid gap-2">
                        <a href="@Url.Action("MyPackages", "Package")" class="btn btn-primary btn-lg">
                            <i class="bi bi-box-seam"></i> View My Packages
                        </a>
                        <a href="@Url.Action("Create", "Lister")" class="btn btn-success btn-lg">
                            <i class="bi bi-plus-circle"></i> Create New Listing
                        </a>
                        <a href="@Url.Action("Dashboard", "Lister")" class="btn btn-outline-secondary">
                            <i class="bi bi-house-door"></i> Go to Dashboard
                        </a>
                    </div>
                </div>
            </div>

            <div class="text-center mt-3">
                <small class="text-muted">
                    Need help? <a href="#" class="text-primary">Contact Support</a>
                </small>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        .success-animation {
            margin: 0 auto;
        }

        .checkmark {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: #28a745;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #28a745;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
            margin: 0 auto;
        }

        .checkmark-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: #28a745;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .checkmark-check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        @@keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        @@keyframes scale {
            0%, 100% {
                transform: none;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }

        @@keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 30px #28a745;
            }
        }
    </style>
}
