@model IEnumerable<RealEstateListingPlatform.Models.ListingApprovalViewModel>

@{
    ViewData["Title"] = "Listings";
    Layout = "_Layout";
}

<div class="container pt-5 mt-5 mb-5">
    <div class="row">
        <aside class="col-lg-3">
            <div class="card border-0 shadow-sm rounded-4 p-3 mb-4 sticky-top" style="top: 100px;">
                <h5 class="fw-bold mb-3">Search filters</h5>

                <div class="mb-3">
                    <label class="form-label small fw-bold">Area</label>
                    <select class="form-select form-select-sm border-light bg-light">
                        <option>All in HCMC</option>
                        <option>District 1</option>
                        <option>District 7</option>
                        <option>Thu Duc City</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label small fw-bold">Price</label>
                    <input type="range" class="form-range" min="0" max="100" id="priceRange">
                    <div class="d-flex justify-content-between small text-muted">
                        <span>0</span>
                        <span>100 B+</span>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label small fw-bold">Property Type</label>
                    <div class="form-check small">
                        <input class="form-check-input" type="checkbox" checked>
                        <label class="form-check-label">Apartment</label>
                    </div>
                    <div class="form-check small">
                        <input class="form-check-input" type="checkbox">
                        <label class="form-check-label">Townhouses</label>
                    </div>
                </div>

                <button class="btn btn-auth-primary w-100 rounded-pill btn-sm mt-2">Apply</button>
            </div>
        </aside>

        <main class="col-lg-9">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-bold mb-0">@ViewData["Title"]</h3>
                <span class="text-muted small">Find <b>@Model.Count()</b> result</span>
            </div>

            <div class="row g-4">
                @foreach (var item in Model)
                {
                    <div class="col-md-6 col-xl-4">
                        <div class="card property-card h-100 border-0 shadow-sm overflow-hidden rounded-4">
                            <div class="position-relative">
                                <img src="@item.ImageUrl" class="card-img-top" style="height: 200px; object-fit: cover;">
                                <div class="position-absolute top-0 end-0 m-2">
                                    <button class="btn btn-light btn-sm rounded-circle shadow-sm"><i class="bi bi-heart"></i></button>
                                </div>
                                <span class="badge @(item.TransactionType == "Sell" ? "bg-primary" : "bg-success") position-absolute bottom-0 start-0 m-3 rounded-pill px-3">
                                    @(item.TransactionType == "Sell" ? "Sale" : "Rent")
                                </span>
                            </div>
                            <div class="card-body">
                                <h6 class="card-title fw-bold text-truncate">@item.Title</h6>
                                <p class="text-muted small"><i class="bi bi-geo-alt"></i> @item.Address</p>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <span class="h5 text-primary fw-bold mb-0">@item.FormattedPrice</span>
                                    <div class="property-icons text-muted small">
                                        <span><i class="bi bi-door-open"></i> @item.Bedrooms</span>
                                        <span class="ms-2"><i class="bi bi-droplet"></i> @item.Bathrooms</span>
                                        <span class="ms-2"><i class="bi bi-aspect-ratio"></i> @(item.Area)m²</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent border-top-0 pb-3">
                                <a asp-controller="Listings" asp-action="PropertyDetail" asp-route-id="@item.Id" class="btn btn-outline-primary w-100 rounded-pill">Details</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </main>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>

        
        aside .card {
            transition: box-shadow 0.3s ease;
        }

        
        .property-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

            .property-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 1rem 3rem rgba(0,0,0,0.1) !important;
            }

        
        .bg-success {
            background-color: #28a745 !important;
        }

        .bg-primary {
            background-color: #0d6efd !important;
        }

        
        @@media (max-width: 991.98px) {
            aside .card {
                position: relative !important;
                top: 0 !important;
                margin-bottom: 2rem;
            }
        }
    </style>
}
