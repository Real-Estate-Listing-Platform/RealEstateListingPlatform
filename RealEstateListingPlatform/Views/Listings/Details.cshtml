@model DAL.Models.Listing

@{
    ViewData["Title"] = "Details";
}


<div class="container mt-4">

    <h2 class="fw-bold">@Model.Title</h2>
    <h4 class="text-danger">@String.Format("{0:N0}", Model.Price) VND</h4>

    <hr />

    <div class="row">
        <div class="col-md-6">
            <table class="table table-bordered">
                <tr><th>Transaction Type</th><td>@Model.TransactionType</td></tr>
                <tr><th>Property Type</th><td>@Model.PropertyType</td></tr>
                <tr><th>Status</th><td>@Model.Status</td></tr>
                <tr><th>Created At</th><td>@Model.CreatedAt?.ToString("dd/MM/yyyy HH:mm")</td></tr>
                <tr><th>Updated At</th><td>@Model.UpdatedAt?.ToString("dd/MM/yyyy HH:mm")</td></tr>
                <tr><th>Expiration Date</th><td>@Model.ExpirationDate?.ToString("dd/MM/yyyy HH:mm")</td></tr>
                <tr><th>Lister</th><td>@Model.ListerId</td></tr>
            </table>
        </div>

        <div class="col-md-6">
            <table class="table table-bordered">
                <tr><th>Bedrooms</th><td>@Model.Bedrooms</td></tr>
                <tr><th>Bathrooms</th><td>@Model.Bathrooms</td></tr>
                <tr><th>Floors</th><td>@Model.Floors</td></tr>
                <tr><th>Direction</th><td>@Model.Direction</td></tr>
                <tr><th>Legal Status</th><td>@Model.LegalStatus</td></tr>
                <tr><th>Furniture Status</th><td>@Model.FurnitureStatus</td></tr>
                <tr><th>Area</th><td>@Model.Area</td></tr>
            </table>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12">
            <h5>Description</h5>
            <div class="border p-3 bg-light">
                @Html.Raw(Model.Description?.Replace("\n", "<br/>") ?? "No description")
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-md-8">
            <h5>Location Details</h5>
            <p>
                @Model.HouseNumber, @Model.StreetName,
                @Model.Ward, @Model.Area, @Model.District, @Model.City
            </p>
            <p>
                <strong>Latitude:</strong> @Model.Latitude |
                <strong>Longitude:</strong> @Model.Longitude
            </p>
        </div>
        <div class="col-md-4">
            <h5>Statistics</h5>
            <table class="table table-sm">
                <tr><th>Favorites:</th><td>@Model.Favorites.Count</td></tr>
                <tr><th>Leads:</th><td>@Model.Leads.Count</td></tr>
                <tr><th>Media Files:</th><td>@Model.ListingMedia.Count</td></tr>
                <tr><th>Price Changes:</th><td>@Model.ListingPriceHistories.Count</td></tr>
                <tr><th>Reports:</th><td>@Model.Reports.Count</td></tr>
                <tr><th>360 Tour:</th><td>@(Model.ListingTour360 != null ? "Available" : "Not Available")</td></tr>
            </table>
        </div>
    </div>

    <div class="mt-3">
        @if (User.IsInRole("Lister"))
        {
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-success">Edit</a>
            <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger ms-2">Delete</a>            
        }
        <a asp-action="Index" class="btn btn-secondary ms-2">Back</a>
    </div>

</div>
